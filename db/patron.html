<!DOCTYPE HTML>
<html lang="en" >
    
    <head>
        
        <meta charset="UTF-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <title>Patron Snapshots | Introduction</title>
        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <meta name="description" content="">
        <meta name="generator" content="GitBook 2.4.1">
        
        
        <meta name="HandheldFriendly" content="true"/>
        <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
        <meta name="apple-mobile-web-app-capable" content="yes">
        <meta name="apple-mobile-web-app-status-bar-style" content="black">
        <link rel="apple-touch-icon-precomposed" sizes="152x152" href="../gitbook/images/apple-touch-icon-precomposed-152.png">
        <link rel="shortcut icon" href="../gitbook/images/favicon.ico" type="image/x-icon">
        
    <link rel="stylesheet" href="../gitbook/style.css">
    
        
        <link rel="stylesheet" href="../gitbook/plugins/gitbook-plugin-highlight/website.css">
        
    
    
        <link rel="stylesheet" href="../styles/website.css">
    

        
    
    
    <link rel="next" href="../db/instruction.html" />
    
    
    <link rel="prev" href="../db/main.html" />
    

        
    </head>
    <body>
        
        
    <div class="book" data-level="1.1" data-basepath=".." data-revision="Sat Nov 21 2015 17:06:05 GMT-0600 (Central Standard Time)">
    

<div class="book-summary">
    <div class="book-search" role="search">
        <input type="text" placeholder="Type to search" class="form-control" />
    </div>
    <nav role="navigation">
        <ul class="summary">
            
            
            
            

            

            
    
        <li class="chapter " data-level="0" data-path="index.html">
            
                
                    <a href="../index.html">
                
                        <i class="fa fa-check"></i>
                        
                        Introduction
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="1" data-path="db/main.html">
            
                
                    <a href="../db/main.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>1.</b>
                        
                        Use Cases
                    </a>
            
            
            <ul class="articles">
                
    
        <li class="chapter active" data-level="1.1" data-path="db/patron.html">
            
                
                    <a href="../db/patron.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>1.1.</b>
                        
                        Patron Snapshots
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="1.2" data-path="db/instruction.html">
            
                
                    <a href="../db/instruction.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>1.2.</b>
                        
                        Library Instruction
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="1.3" data-path="db/ezproxy.html">
            
                
                    <a href="../db/ezproxy.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>1.3.</b>
                        
                        EZproxy Logs
                    </a>
            
            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="2" data-path="import/import.html">
            
                
                    <a href="../import/import.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>2.</b>
                        
                        Importing Data
                    </a>
            
            
            <ul class="articles">
                
    
        <li class="chapter " data-level="2.1" data-path="import/dsn.html">
            
                
                    <a href="../import/dsn.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>2.1.</b>
                        
                        Setting up your database
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="2.2" data-path="import/database.html">
            
                
                    <a href="../import/database.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>2.2.</b>
                        
                        Data in existing databases
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="2.3" data-path="import/files.html">
            
                
                    <a href="../import/files.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>2.3.</b>
                        
                        Data in files
                    </a>
            
            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="3" data-path="appendix/a-python.html">
            
                
                    <a href="../appendix/a-python.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>3.</b>
                        
                        Appendix A - Installing Python Software
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="4" data-path="appendix/b-odbc.html">
            
                
                    <a href="../appendix/b-odbc.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>4.</b>
                        
                        Appendix B - Installing Access ODBC Drivers
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="5" data-path="appendix/c-troubleshooting.html">
            
                
                    <a href="../appendix/c-troubleshooting.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>5.</b>
                        
                        Appendix C - Troubleshooting
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="6" data-path="appendix/d-database-basics.html">
            
                
                    <a href="../appendix/d-database-basics.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>6.</b>
                        
                        Appendix D - Database Basics
                    </a>
            
            
        </li>
    


            
            <li class="divider"></li>
            <li>
                <a href="https://www.gitbook.com" target="blank" class="gitbook-link">
                    Published with GitBook
                </a>
            </li>
            
        </ul>
    </nav>
</div>

    <div class="book-body">
        <div class="body-inner">
            <div class="book-header" role="navigation">
    <!-- Actions Left -->
    <a href="#" class="btn pull-left toggle-summary" aria-label="Table of Contents"><i class="fa fa-align-justify"></i></a>
    <a href="#" class="btn pull-left toggle-search" aria-label="Search"><i class="fa fa-search"></i></a>
    
    <div id="font-settings-wrapper" class="dropdown pull-left">
        <a href="#" class="btn toggle-dropdown" aria-label="Font Settings"><i class="fa fa-font"></i>
        </a>
        <div class="dropdown-menu font-settings">
    <div class="dropdown-caret">
        <span class="caret-outer"></span>
        <span class="caret-inner"></span>
    </div>

    <div class="buttons">
        <button type="button" id="reduce-font-size" class="button size-2">A</button>
        <button type="button" id="enlarge-font-size" class="button size-2">A</button>
    </div>

    <div class="buttons font-family-list">
        <button type="button" data-font="0" class="button">Serif</button>
        <button type="button" data-font="1" class="button">Sans</button>
    </div>

    <div class="buttons color-theme-list">
        <button type="button" id="color-theme-preview-0" class="button size-3" data-theme="0">White</button>
        <button type="button" id="color-theme-preview-1" class="button size-3" data-theme="1">Sepia</button>
        <button type="button" id="color-theme-preview-2" class="button size-3" data-theme="2">Night</button>
    </div>
</div>

    </div>

    <!-- Actions Right -->
    
    <div class="dropdown pull-right">
        <a href="#" class="btn toggle-dropdown" aria-label="Share"><i class="fa fa-share-alt"></i>
        </a>
        <div class="dropdown-menu font-settings dropdown-left">
            <div class="dropdown-caret">
                <span class="caret-outer"></span>
                <span class="caret-inner"></span>
            </div>
            <div class="buttons">
                <button type="button" data-sharing="twitter" class="button">
                    Share on Twitter
                </button>
                <button type="button" data-sharing="google-plus" class="button">
                    Share on Google
                </button>
                <button type="button" data-sharing="facebook" class="button">
                    Share on Facebook
                </button>
                <button type="button" data-sharing="weibo" class="button">
                    Share on Weibo
                </button>
                <button type="button" data-sharing="instapaper" class="button">
                    Share on Instapaper
                </button>
            </div>
        </div>
    </div>
    

    
    <a href="#" target="_blank" class="btn pull-right google-plus-sharing-link sharing-link" data-sharing="google-plus" aria-label="Google"><i class="fa fa-google-plus"></i></a>
    
    
    <a href="#" target="_blank" class="btn pull-right facebook-sharing-link sharing-link" data-sharing="facebook" aria-label="Facebook"><i class="fa fa-facebook"></i></a>
    
    
    <a href="#" target="_blank" class="btn pull-right twitter-sharing-link sharing-link" data-sharing="twitter" aria-label="Twitter"><i class="fa fa-twitter"></i></a>
    
    
    


    <!-- Title -->
    <h1>
        <i class="fa fa-circle-o-notch fa-spin"></i>
        <a href="../" >Introduction</a>
    </h1>
</div>

            <div class="page-wrapper" tabindex="-1" role="main">
                <div class="page-inner">
                
                
                    <section class="normal" id="section-">
                    
                        <h1 id="patron-snapshot-use-case">Patron Snapshot Use Case</h1>
<p>The Voyager databases maintained by CARLI contain information about patrons at member institutions.  These database tables provide current information about patrons, but do not store historical information.  In order to analyze patron activity over a long timescale, it is useful to take periodic snapshots and use the information in those snapshots to build reports that show activity over time.</p>
<p>The two tables we&apos;re intersted in looking at are the Patron Data table and the Patron Snapshot table.</p>
<p><img src="../images/db-core-1.png" alt="Core Tables"></p>
<p>Looking over the information available in these tables, we can see that the Patron Snapshot table already tracks historical information, so we can probably use it as-is.  We can either access the table directly via a linked table (see the section on <a href="../import/db.md">Importing data in existing databases</a> for more on this), or we can import the data into our local Access database.</p>
<p>The Patron Data table, however, contains a field that may change over time, and we don&apos;t have any way of tracking these changes.  A patron&apos;s department may change one or more times over the period that their snapshot data covers, and if we want to associate the circulation snapshot numbers with a specific department, we need to know the dates range during which the patron was associated with that department.</p>
<p>To do this, we&apos;ll add a few new tables to our Access database.</p>
<p><img src="../images/db-design-1.png" alt="Initial Tables"></p>
<p>The Patron and PatronSnapshot tables should be fairly self-explanatory.  They are simply copies of the tables that exist in the core database.  The names of fields are slightly changed to make them easier to understand, but for the most part we can simply copy data directly from the core database to our database if we want to query against it.</p>
<p>The two tables we&apos;ve added, Department and PatronDepartment, are used to track a patrons department association over time.  Since the number of departments at a given institution is relatively small compared to the number of patrons, we&apos;d rather not waste space in our database by duplicating department information in every patron record, so we&apos;ve added the Department table to store department information.  Incidentally, this also makes queries that involve departments perform better, since we will mostly be concerned with the DepartmentId, which is an indexed field.<br>The table that represents a patron&apos;s association with a department is called PatronDepartment (this naming scheme will start to look fairly familiar as you work with the database).  There will be a single record in the table for every patron/department association.  For example, if a patron was listed in the Math department from 2012 to 2013, and the English department from 2013 to 2014, there would be two records for that patron in the PatronDepartment table.  This lets us associate any items loaned to the patron in 2012 with the Math department, and any items in 2013 with the English department.</p>
<p>We can always identify which department the patron is currently associated with, because there will be a record in the PatronDepartment table with no DepartmentEndDate value.</p>
<p>Any piece of information that is associated with a patron, and that changes over time, can be treated this way. Any information to be stored about the patron is put into the &quot;dimension&quot; table (in our examples, Department or Class), and a record tying the patron to the information is put into the &quot;fact&quot; table (PatronDepartment or PatronClass).   </p>
<p>For example, if we want to track the classes a patron was taking over time, we can add a table that looks like this:</p>
<p><img src="../images/db-design-2.png" alt="Classes"></p>
<p>It should also be noted that there is no identifying information included in the data we&apos;re including in our database.  We&apos;re only interested in looking at the aggregate statistics, and the patronID is simply a convenient way to tie all of the different tables together.</p>

                    
                    </section>
                
                
                </div>
            </div>
        </div>

        
        <a href="../db/main.html" class="navigation navigation-prev " aria-label="Previous page: Use Cases"><i class="fa fa-angle-left"></i></a>
        
        
        <a href="../db/instruction.html" class="navigation navigation-next " aria-label="Next page: Library Instruction"><i class="fa fa-angle-right"></i></a>
        
    </div>
</div>

        
<script src="../gitbook/app.js"></script>

    
    <script src="../gitbook/plugins/gitbook-plugin-livereload/plugin.js"></script>
    

<script>
require(["gitbook"], function(gitbook) {
    var config = {"fontSettings":{"theme":null,"family":"sans","size":2}};
    gitbook.start(config);
});
</script>

        
    </body>
    
</html>
